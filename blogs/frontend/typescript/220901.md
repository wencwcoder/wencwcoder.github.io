---
title: TypeScript上手指南
date: 2022-09-01
categories:
 - 前端
tags:
 - TypeScript
---

<!-- more -->



## 一、前言

- 官方文档：[https://www.typescriptlang.org/](https://www.typescriptlang.org/)。
- 中文文档：[https://www.tslang.cn/index.html](https://www.tslang.cn/index.html)。



## 二、TypeScript 的优缺点

### 1. 优点

- 代码的可读性和可维护性，友好的提示。
- 在编译阶段就发现大部分错误，避免了很多线上 bug。
- 增强了编辑器和 IDE 的功能，包括代码补全、接口提示、跳转到定义、重构等。



### 2. 缺点

- 有一定的学习成本，需要理解接口（Interfaces）、泛型（Generics）、类（Classes）、枚举类型（Enums）等前端工程师可能不是很熟悉的概念。
- 会增加一些开发成本，当然这是前期的，后期维护更简单了。
- 一些 JavaScript 库需要兼容，提供声明文件。
- TypeScript 编译是需要时间的，这就意味着项目大了以后，**开发环境启动**和**生产环境打包**的速度就成了考验。



## 三、anyScript

可能因为业务场景或者业务紧张，or 某个跑路的大哥省了点功夫，用了 TypeScript 的项目也可能会变成 `anyScript`。以下是几种救急的方式：

- // @ts-nocheck 禁用整个文件的 ts 校验；
- // @ts-ignore 禁用单行 ts 校验；
- `any` 和 `unknown` 不建议多用，但也不是不能用，有些场景确实不好写 ts 定义。这个时候就不要硬憋自己了，写个备注 any 下。

> 抛个面试题：你知道 any 和 unknown 的区别吗？



## 四、TypeScript 类型

### 1. 基础类型

- 常用：boolean、number、string、array、enum、any、void。
- 不常用：tuple、null、undefined、never。

```typescript
const count: number = 20220901;
```



### 2. 对象类型

- 简单理解 interface 和 type 的区别：type 更强大，interface 可以进行**声明合并**，type 不行。

```typescript
interface Hero {
  name: string;
  age: number;
  skill: string;
  skinNum?: number;
  say(): string; // say 函数返回值为 string
  [propname: string]: any; // 当前 Hero 可定义任意字符串类型的 key
}

type Hero = {
  name: string,
  age: number,
  skill: string,
  skinNum?: number,
}
```



### 3. 数组类型

- 项目中常见的写法，需要声明列表数据类型：

```typescript
interface Item {
  id: number;
  name: string;
}
const objectArr: Item[] = [{ id: 1, name: 'wen' }];
const objectArr: Array<Item> = [{ id: 1, name: 'wen' }];

const numberArr: number[] = [1, 2, 3];
const arr: (number | string)[] = [1, "string", 2];
```



### 4. 元组 tuple

- 元组和数组类似，但是类型注解时会不一样。
- 赋值的类型、位置、个数需要和定义（声明）的类型、位置、个数一致。

```typescript
// 数组 某个位置的值可以是注解中的任何一个
const LOL: (string | number)[] = ["zed", 25, "darts"];

// 元祖 每一项数据类型必须一致
const LOL: [string, string, number] = ["zed", "darts", 25];
```



### 5. 联合|类型 or 交叉&类型

- 联合类型：某个变量可能是多个 interface 中的其中一个，用 `|` 分割。
- 交叉类型：由多个类型组成，用 `&` 连接。

```typescript
type UnionA = 'px' | 'em' | 'rem' | '%';
type UnionB = 'vh' | 'em' | 'rem' | 'pt';
type IntersectionUnion = UnionA & UnionB;

const intersectionA: IntersectionUnion = 'em'; // ok
const intersectionB: IntersectionUnion = 'rem'; // ok
const intersectionC: IntersectionUnion = 'px'; // ts(2322)
const intersectionD: IntersectionUnion = 'pt'; // ts(2322)
```



### 6. enum 枚举

- 提高代码可维护性，统一维护某些枚举值。

```typescript
enum TestEnum {
  RED,
  BLUE,
  GREEN
}
enum TestEnum2 {
  RED = 6,
  BLUE,
  GREEN
}

const test: TestEnum = TestEnum.BLUE // 1
const test2: TestEnum2 = TestEnum2.BLUE // 7
```



### 7. 泛型 T（Type）

- 简单说就是，泛指的类型，不确定的类型，可以理解为一个**占位符**（使用T只是习惯，使用任何字母都行）。
- K（Key）：表示对象中的键类型；V（Value）：表示对象中的值类型；E（Element）：表示元素类型。

```typescript
// T 自定义名称
function myFun<T>(params: T[]) {
  return params;
}
myFun<string> (["123", "456"]);

// 定义多个泛型
function join<T, P>(first: T, second: P) {
  return `${first}${second}`;
}
join<number, string> (1, "2");
```



### 8. 断言

- 断言用来手动指定一个值的类型。**值 as 类型** or **<类型>值**。

> 注意在 tsx 语法中必须使用前者，即 值 as 类型











