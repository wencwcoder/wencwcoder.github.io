---
title: Vue开发实战
date: 2021-07-21
categories:
 - 随笔
tags:
 - 极客时间
---

<!-- more -->



## 1. 基础篇

### 相关概念

- 一款渐进式 JavaScript 框架。
- 轻量级；渐进式框架；响应式更新机制；学习成本低。
- 指令就是一个标志位，底层会根据这个标志去做相应处理。
- 双向数据绑定和单向数据流不冲突。
- 虚拟 DOM 及 key 属性的作用。
- 数据来源（单向的）：来自父元素的属性、来自组件自身的状态、来自状态管理器。



### 组件基础及组件注册

- `Vue.component()` 。
- 单文件组件：`.vue` 后缀；`template - script - style`。



### Vue 组件的核心概念

- 事件：【1】`v-on / @`；【2】`$emit`；【3】事件修饰符。

- 插槽：【1】插槽的作用：传递复杂内容的方式。【2】作用域插槽可以理解为，本质上是返回组件的函数。
- 计算属性 `computed`：减少模板中计算逻辑、数据缓存、依赖固定的数据类型（响应式数据）。
- 侦听器 `watch`：更加灵活、通用；可以执行任何逻辑，  如函数节流、异步请求数据、操作 DOM。



## 2. 生态篇

### 相关概念

- Vuex 是一种状态管理模式。
- Vuex 核心概念：state / getter / mutation / action / module。
- SPA 及其优缺点：[https://blog.csdn.net/qq_38188762/article/details/105175554](https://blog.csdn.net/qq_38188762/article/details/105175554)
- vue-router 底层原理：【router-link / $router.push / a href / 浏览器前进后退 / 手动更改 URL】 --> updateRoute --> Vue.util.defineReactive_route --> router-view。
- SPA 缺点：不利于 SEO（服务端渲染 SSR）、首屏渲染时间长（预渲染 Prerendering）。
- 对于动态内容，如果不使用 SSR，如何做 SEO：使用无头浏览器（phantomjs、headlessChrome）
- Nuxt：静态站点、动态渲染、简化配置。
- Vuex 是通过什么方式提供响应式数据的：`new Vue({})`。
- Vuex 注入 $store：`beforeCreate` 中混入 `$store` 的获取方式。



### 手写 vuex

```javascript
import Vue from 'vue'

const Store = function Store(option = {}) {
    const {state = {}, mutations = {}, actions = {}, getters={}} = option;
    this._vm = new Vue({
        data: {
            $sstate: state
        }
    })
    this._mutations = mutations
    this._actions = actions
    this._getters = getters
    const ref = this
    const commit = ref.commit
    const dispatch = ref.dispatch

    this.commit = function boundCommit(type, paylod){
        return commit.call(ref, type, paylod)
    }

    this.dispatch = function boundDispatch(type, paylod){
        return dispatch.call(ref, type, paylod)
    }
}

Store.prototype.commit = function(type, paylod) {
    if(this._mutations[type]){
        this._mutations[type](this.state, paylod)
    }
}

Store.prototype.dispatch = function(type, paylod){
    if(this._actions[type]){
        this._actions[type]({
            state: this.state,
            commit: this.commit,
            paylod,
        })
    }
}

Store.prototype.getters = function(type){
    if(this._getters[type]){
        this._getters[type](this.state)
    }
}

Object.defineProperties(Store.prototype,{
    state: {
        get: function(){
            return this._vm.$data.$sstate
        }
    }
})

export default {Store}
```



### 单元测试 

- 重要性：保证研发质量、提高项目的稳定性、提高开发速度。
- 使用方式：`jest`、`@vue/test-utils`、`sinon`（mock）。

```javascript
// jest.config.js
module.exports = {
    // jest-transform-stub
}
```

```javascript
// 生成快照，校验两次 html
expect(wrapper.hmtl()).toMatchSnapshot()
```



## 3. 实战篇

